# =============================================================================
# 99-n8n-optimizations.conf - Kernel Parameters for n8n Stack
# =============================================================================
# Description: Sysctl settings optimized for Redis and Docker workloads
# Location: /etc/sysctl.d/99-n8n-optimizations.conf
# Apply: sudo sysctl -p /etc/sysctl.d/99-n8n-optimizations.conf
# =============================================================================

# -----------------------------------------------------------------------------
# Redis Optimization
# -----------------------------------------------------------------------------

# vm.overcommit_memory: Controls memory overcommit behavior
# 0 = Heuristic overcommit handling (default)
# 1 = Always overcommit (never fail malloc)
# 2 = Don't overcommit (use swap + ratio * physical RAM)
#
# Redis requires setting this to 1 to prevent fork() failures during
# background saves (BGSAVE) and AOF rewrites. Without this, Redis logs:
#   "WARNING overcommit_memory is set to 0!"
#
# Reference: https://redis.io/docs/management/admin/
vm.overcommit_memory = 1
